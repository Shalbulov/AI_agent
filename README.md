# AI Agent ั MCP ะธะฝัะตะณัะฐัะธะตะน

AI-ะฐะณะตะฝั ั ะธะฝัะตะณัะฐัะธะตะน MCP ัะตัะฒะตัะฐ ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะฟัะพะดัะบัะฐะผะธ. ะัะพะตะบั ะฒะบะปััะฐะตั MCP ัะตัะฒะตั ะฝะฐ FastMCP, LangGraph ะฐะณะตะฝัะฐ ั ะบะฐััะพะผะฝัะผะธ ะธะฝััััะผะตะฝัะฐะผะธ, FastAPI ะฟัะธะปะพะถะตะฝะธะต ะธ Docker ะบะพะฝัะธะณััะฐัะธั.

## ๐ ะะฟะธัะฐะฝะธะต

ะัะพะตะบั ัะพััะพะธั ะธะท ััะตั ะพัะฝะพะฒะฝัั ะบะพะผะฟะพะฝะตะฝัะพะฒ:

1. **MCP Server** - ัะตัะฒะตั ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะดะฐะฝะฝัะผะธ ะพ ะฟัะพะดัะบัะฐั ัะตัะตะท Model Context Protocol
2. **LangGraph Agent** - AI ะฐะณะตะฝั ั ะธะฝัะตะณัะฐัะธะตะน MCP ะธ ะบะฐััะพะผะฝัะผะธ ะธะฝััััะผะตะฝัะฐะผะธ
3. **FastAPI Application** - REST API ะดะปั ะฒะทะฐะธะผะพะดะตะนััะฒะธั ั ะฐะณะตะฝัะพะผ

## ๐๏ธ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ             Docker Container                    โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ         FastAPI App                       โ โ
โ  โ  POST /api/v1/agent/query                โ โ
โ  โโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                    โ                            โ
โ                    โผ                            โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ        LangGraph Agent                  โ   โ
โ  โ  - ะะฝะฐะปะธะทะธััะตั ะทะฐะฟัะพั                  โ   โ
โ  โ  - ะัะฑะธัะฐะตั tools                      โ   โ
โ  โ  - ะัะทัะฒะฐะตั tools                      โ   โ
โ  โ  - ะคะพัะผะธััะตั ะพัะฒะตั                     โ   โ
โ  โโโโโฌโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโ   โ
โ      โ                      โ                   โ
โ      โผ                      โผ                   โ
โ  โโโโโโโโโโโโ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ Custom   โ   โ   MCP Server             โ   โ
โ  โ Tools    โ   โ  - list_products         โ   โ
โ  โ          โ   โ  - get_product           โ   โ
โ  โ          โ   โ  - add_product           โ   โ
โ  โ          โ   โ  - get_statistics        โ   โ
โ  โโโโโโโโโโโโ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ ะัััััะน ััะฐัั

### ะะฐัะธะฐะฝั 1: ะงะตัะตะท Docker Compose (ัะตะบะพะผะตะฝะดัะตััั)

1. **ะะปะพะฝะธััะนัะต ัะตะฟะพะทะธัะพัะธะน** (ะตัะปะธ ะฟัะธะผะตะฝะธะผะพ) ะธะปะธ ะฟะตัะตะนะดะธัะต ะฒ ะดะธัะตะบัะพัะธั ะฟัะพะตะบัะฐ

2. **ะะฐะฟัััะธัะต ัะตัะตะท Docker Compose:**
   ```bash
   docker-compose up --build
   ```

3. **ะัะธะปะพะถะตะฝะธะต ะฑัะดะตั ะดะพัััะฟะฝะพ ะฟะพ ะฐะดัะตัั:**
   - API: http://localhost:8080
   - ะะพะบัะผะตะฝัะฐัะธั: http://localhost:8080/docs

### ะะฐัะธะฐะฝั 2: ะะพะบะฐะปัะฝะพ

1. **ะฃััะฐะฝะพะฒะธัะต ะทะฐะฒะธัะธะผะพััะธ:**
   ```bash
   pip install -r requirements.txt
   ```

2. **ะะฐะฟัััะธัะต FastAPI ะฟัะธะปะพะถะตะฝะธะต:**
   ```bash
   uvicorn app:app --host 0.0.0.0 --port 8080
   ```

3. **ะัะธะปะพะถะตะฝะธะต ะฑัะดะตั ะดะพัััะฟะฝะพ ะฟะพ ะฐะดัะตัั:**
   - ๐ **ะะตะฑ-ะธะฝัะตััะตะนั**: http://localhost:8080 (ะณะปะฐะฒะฝะฐั ัััะฐะฝะธัะฐ)
   - ๐ก **API**: http://localhost:8080/api/v1/agent/query
   - ๐ **ะะพะบัะผะตะฝัะฐัะธั Swagger**: http://localhost:8080/docs

## ๐จ ะะตะฑ-ะธะฝัะตััะตะนั

ะัะพะตะบั ะฒะบะปััะฐะตั ะฟะพะปะฝะพััะฝะบัะธะพะฝะฐะปัะฝัะน ะฒะตะฑ-ะธะฝัะตััะตะนั ะดะปั ะฒะทะฐะธะผะพะดะตะนััะฒะธั ั ะฐะณะตะฝัะพะผ:

- ๐ฌ **ะะฝัะตัะฐะบัะธะฒะฝัะน ัะฐั** - ะพะฑัะตะฝะธะต ั AI ะฐะณะตะฝัะพะผ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
- ๐ **ะัััััะต ะฟัะธะผะตัั** - ะณะพัะพะฒัะต ะทะฐะฟัะพัั ะพะดะฝะธะผ ะบะปะธะบะพะผ
- ๐ **ะะธะทัะฐะปะธะทะฐัะธั ะฟัะพะดัะบัะพะฒ** - ะฐะฒัะพะผะฐัะธัะตัะบะพะต ะพัะพะฑัะฐะถะตะฝะธะต ัะตะบััะธั ะฟัะพะดัะบัะพะฒ
- ๐ฏ **ะกะพะฒัะตะผะตะฝะฝัะน ะดะธะทะฐะนะฝ** - ะฐะดะฐะฟัะธะฒะฝัะน ะธะฝัะตััะตะนั ั ะณัะฐะดะธะตะฝัะฐะผะธ

ะัะบัะพะนัะต http://localhost:8080 ะฒ ะฑัะฐัะทะตัะต ะดะปั ะดะพัััะฟะฐ ะบ ะฒะตะฑ-ะธะฝัะตััะตะนัั.

## ๐ก API Endpoints

### POST /api/v1/agent/query

ะัะฟัะฐะฒะปัะตั ะทะฐะฟัะพั ะบ AI ะฐะณะตะฝัั.

**ะะฐะฟัะพั:**
```json
{
  "query": "ะะพะบะฐะถะธ ะฒัะต ะฟัะพะดัะบัั ะฒ ะบะฐัะตะณะพัะธะธ ะญะปะตะบััะพะฝะธะบะฐ"
}
```

**ะัะฒะตั:**
```json
{
  "query": "ะะพะบะฐะถะธ ะฒัะต ะฟัะพะดัะบัั ะฒ ะบะฐัะตะณะพัะธะธ ะญะปะตะบััะพะฝะธะบะฐ",
  "response": "ID: 1, ะะพััะฑัะบ, 50000โฝ, ะญะปะตะบััะพะฝะธะบะฐ\nID: 2, ะกะผะฐัััะพะฝ, 30000โฝ, ะญะปะตะบััะพะฝะธะบะฐ"
}
```

### GET /health

ะัะพะฒะตัะบะฐ ะทะดะพัะพะฒัั ะฟัะธะปะพะถะตะฝะธั.

**ะัะฒะตั:**
```json
{
  "status": "healthy"
}
```

### GET /

ะะพัะฝะตะฒะพะน endpoint ั ะธะฝัะพัะผะฐัะธะตะน ะพ API.

## ๐๏ธ ะัะธะผะตัั ะทะฐะฟัะพัะพะฒ

### 1. ะะพะปััะธัั ัะฟะธัะพะบ ะฒัะตั ะฟัะพะดัะบัะพะฒ
```bash
curl -X POST "http://localhost:8080/api/v1/agent/query" \
  -H "Content-Type: application/json" \
  -d '{"query": "ะะพะบะฐะถะธ ะฒัะต ะฟัะพะดัะบัั"}'
```

### 2. ะะพะปััะธัั ะฟัะพะดัะบัั ะฟะพ ะบะฐัะตะณะพัะธะธ
```bash
curl -X POST "http://localhost:8080/api/v1/agent/query" \
  -H "Content-Type: application/json" \
  -d '{"query": "ะะพะบะฐะถะธ ะฒัะต ะฟัะพะดัะบัั ะฒ ะบะฐัะตะณะพัะธะธ ะญะปะตะบััะพะฝะธะบะฐ"}'
```

### 3. ะะพะปััะธัั ััะฐัะธััะธะบั
```bash
curl -X POST "http://localhost:8080/api/v1/agent/query" \
  -H "Content-Type: application/json" \
  -d '{"query": "ะะฐะบะฐั ััะตะดะฝัั ัะตะฝะฐ ะฟัะพะดัะบัะพะฒ?"}'
```

### 4. ะะพะฑะฐะฒะธัั ะฝะพะฒัะน ะฟัะพะดัะบั
```bash
curl -X POST "http://localhost:8080/api/v1/agent/query" \
  -H "Content-Type: application/json" \
  -d '{"query": "ะะพะฑะฐะฒั ะฝะพะฒัะน ะฟัะพะดัะบั: ะััะบะฐ, ัะตะฝะฐ 1500, ะบะฐัะตะณะพัะธั ะญะปะตะบััะพะฝะธะบะฐ"}'
```

### 5. ะััะธัะปะธัั ัะบะธะดะบั
```bash
curl -X POST "http://localhost:8080/api/v1/agent/query" \
  -H "Content-Type: application/json" \
  -d '{"query": "ะะพััะธัะฐะน ัะบะธะดะบั 15% ะฝะฐ ัะพะฒะฐั ั ID 1"}'
```

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

ะะฐะฟััะบ ัะตััะพะฒ:

```bash
# ะฃััะฐะฝะพะฒะธัะต pytest, ะตัะปะธ ะตัะต ะฝะต ัััะฐะฝะพะฒะปะตะฝ
pip install pytest

# ะะฐะฟัััะธัะต ะฒัะต ัะตััั
pytest test_agent.py -v

# ะะฐะฟัััะธัะต ะบะพะฝะบัะตัะฝัะน ัะตัั
pytest test_agent.py::TestMCPServer::test_list_products_all -v
```

ะขะตััั ะฟะพะบััะฒะฐัั:
- โ MCP ัะตัะฒะตั (ะฒัะต 4 ะธะฝััััะผะตะฝัะฐ)
- โ ะะฐััะพะผะฝัะต ะธะฝััััะผะตะฝัั ะฐะณะตะฝัะฐ
- โ ะะฝัะตะณัะฐัะธั ะฐะณะตะฝัะฐ
- โ FastAPI endpoints

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
task_Arsen_Anarbek/
โโโ mcp_server.py          # MCP ัะตัะฒะตั ั ะธะฝััััะผะตะฝัะฐะผะธ ะดะปั ะฟัะพะดัะบัะพะฒ
โโโ agent.py                # LangGraph ะฐะณะตะฝั ั MCP ะธะฝัะตะณัะฐัะธะตะน
โโโ app.py                  # FastAPI ะฟัะธะปะพะถะตะฝะธะต
โโโ test_agent.py           # ะขะตััั
โโโ requirements.txt        # ะะฐะฒะธัะธะผะพััะธ Python
โโโ Dockerfile              # Docker ะพะฑัะฐะท
โโโ docker-compose.yml      # Docker Compose ะบะพะฝัะธะณััะฐัะธั
โโโ .gitignore              # Git ignore ัะฐะนะป
โโโ products.json           # ะคะฐะนะป ั ะดะฐะฝะฝัะผะธ ะพ ะฟัะพะดัะบัะฐั (ัะพะทะดะฐะตััั ะฐะฒัะพะผะฐัะธัะตัะบะธ)
โโโ README.md               # ะะพะบัะผะตะฝัะฐัะธั
```

## ๐ง ะขะตัะฝะพะปะพะณะธะธ

- **Python 3.11+**
- **FastMCP** - ะดะปั ัะพะทะดะฐะฝะธั MCP ัะตัะฒะตัะฐ
- **LangGraph** - ะดะปั ัะพะทะดะฐะฝะธั ะฐะณะตะฝัะฐ
- **LangChain Core** - ะดะปั ัะฐะฑะพัั ั LLM ะธ ะธะฝััััะผะตะฝัะฐะผะธ
- **FastAPI** - ะดะปั REST API
- **Docker & Docker Compose** - ะดะปั ะบะพะฝัะตะนะฝะตัะธะทะฐัะธะธ
- **Pytest** - ะดะปั ัะตััะธัะพะฒะฐะฝะธั

## ๐ MCP ะกะตัะฒะตั

MCP ัะตัะฒะตั ะฟัะตะดะพััะฐะฒะปัะตั ัะปะตะดัััะธะต ะธะฝััััะผะตะฝัั:

1. **list_products(category: Optional[str])** - ะะพะปััะธัั ัะฟะธัะพะบ ะฟัะพะดัะบัะพะฒ
2. **get_product(product_id: int)** - ะะพะปััะธัั ะฟัะพะดัะบั ะฟะพ ID
3. **add_product(name, price, category, in_stock)** - ะะพะฑะฐะฒะธัั ะฝะพะฒัะน ะฟัะพะดัะบั
4. **get_statistics()** - ะะพะปััะธัั ััะฐัะธััะธะบั (ะบะพะปะธัะตััะฒะพ, ััะตะดะฝัั ัะตะฝะฐ)

ะะฐะฝะฝัะต ััะฐะฝัััั ะฒ JSON ัะฐะนะปะต `products.json`.

## ๐ค AI ะะณะตะฝั

ะะณะตะฝั ะธัะฟะพะปัะทัะตั:
- **Mock LLM** - ะดะปั ะฐะฝะฐะปะธะทะฐ ะทะฐะฟัะพัะพะฒ ะฑะตะท ัะตะฐะปัะฝัั API ะบะปััะตะน
- **MCP ะธะฝััััะผะตะฝัั** - ะดะปั ัะฐะฑะพัั ั ะฟัะพะดัะบัะฐะผะธ
- **ะะฐััะพะผะฝัะต ะธะฝััััะผะตะฝัั**:
  - `calculate_discount` - ะฒััะธัะปะตะฝะธะต ัะบะธะดะบะธ
  - `format_currency` - ัะพัะผะฐัะธัะพะฒะฐะฝะธะต ะฒะฐะปััั

## ๐ณ Docker

### ะกะฑะพัะบะฐ ะพะฑัะฐะทะฐ:
```bash
docker build -t ai-agent .
```

### ะะฐะฟััะบ ะบะพะฝัะตะนะฝะตัะฐ:
```bash
docker run -p 8080:8080 ai-agent
```

### ะััะฐะฝะพะฒะบะฐ:
```bash
docker-compose down
```

## ๐ ะคะพัะผะฐั ะดะฐะฝะฝัั ะฟัะพะดัะบัะฐ

```json
{
  "id": 1,
  "name": "ะะพััะฑัะบ",
  "price": 50000,
  "category": "ะญะปะตะบััะพะฝะธะบะฐ",
  "in_stock": true
}
```

## ๐ ะะพะณะธัะพะฒะฐะฝะธะต

ะัะธะปะพะถะตะฝะธะต ะธัะฟะพะปัะทัะตั ััะฐะฝะดะฐััะฝะพะต ะปะพะณะธัะพะฒะฐะฝะธะต Python. ะะพะณะธ ะฒัะฒะพะดัััั ะฒ ะบะพะฝัะพะปั ั ััะพะฒะฝะตะผ INFO.

## โ๏ธ ะัะธะผะตัะฐะฝะธั

- MCP ัะตัะฒะตั ะธัะฟะพะปัะทัะตั ะฟััะผะพะต ะธะผะฟะพััะธัะพะฒะฐะฝะธะต ะผะพะดัะปะตะน ะดะปั ัะฟัะพัะตะฝะธั (ะฒ production ัะปะตะดัะตั ะธัะฟะพะปัะทะพะฒะฐัั ะฟะพะปะฝะพัะตะฝะฝัะน MCP ะฟัะพัะพะบะพะป ัะตัะตะท stdio)
- LLM ัะฒะปัะตััั ะผะพะบะพะผ ะธ ะฝะต ััะตะฑัะตั API ะบะปััะตะน
- ะะฐะฝะฝัะต ััะฐะฝัััั ะฒ JSON ัะฐะนะปะต (ะดะปั production ัะตะบะพะผะตะฝะดัะตััั ะธัะฟะพะปัะทะพะฒะฐัั ะฑะฐะทั ะดะฐะฝะฝัั)

## ๐ ะะธัะตะฝะทะธั

ะญัะพั ะฟัะพะตะบั ัะพะทะดะฐะฝ ะฒ ัะฐะผะบะฐั ัะตััะพะฒะพะณะพ ะทะฐะดะฐะฝะธั.

## ๐ค ะะฒัะพั

ะกะพะทะดะฐะฝะพ ะดะปั ัะตััะพะฒะพะณะพ ะทะฐะดะฐะฝะธั AI Engineer.
